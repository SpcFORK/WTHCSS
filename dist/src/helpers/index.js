"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/WTFCss/src/helpers/index.js
var helpers_exports = {};
__export(helpers_exports, {
  charsets: () => charset_default,
  colorProfiles: () => colorprofile_default,
  container: () => container_default,
  counterStyles: () => counterstyle_default,
  default: () => helpers_default,
  fontFaces: () => fontface_default,
  fontFeatureValues: () => fontfeaturevalues_default,
  fontPaletteValues: () => fontpalletevalues_default,
  importer: () => import_default,
  keyframes: () => keyframes_default,
  layer: () => layer_default,
  media: () => media_default,
  namespace: () => namespace_default,
  pages: () => page_default,
  property: () => property_default,
  startingStyles: () => startingstyle_default,
  supports: () => supports_default
});
module.exports = __toCommonJS(helpers_exports);

// src/WTFCss/src/helpers/@charset.js
var charset = (charsetValue) => `@charset "${charsetValue}";`;
var charset_default = charset;

// src/WTFCss/src/helpers/@colorprofile.js
var defineColorProfile = (name, src, renderingIntent) => {
  let profileRule = `@color-profile ${name} {
  src: url("${src}")`;
  if (renderingIntent) {
    profileRule += `;
  rendering-intent: ${renderingIntent}`;
  }
  profileRule += ";\n}";
  return profileRule;
};
var colorprofile_default = defineColorProfile;

// src/WTFCss/src/helpers/@container.js
var applyContainerStyles = (name, condition, styles) => {
  let containerRule = `@container ${name ? name + " " : ""}(${condition}) {
${styles}
}`;
  return containerRule;
};
var container_default = applyContainerStyles;

// src/WTFCss/src/helpers/@property.js
var registerProperty = (name, syntax, inherits, initialValue) => {
  return {
    [`@property ${name}`]: "{ " + !syntax + !inherits + !initialValue + " }"
  };
};
var property_default = registerProperty;

// src/WTFCss/src/helpers/@counterstyle.js
var defineCounterStyle = (name, rules) => {
  if (["decimal", "disc", "square", "circle", "disclosure-open", "disclosure-closed"].includes(name.toLowerCase())) {
    throw new Error(`The name "${name}" is not allowed for custom counter styles.`);
  }
  const ruleEntries = Object.entries(rules).map(([descriptor, value]) => {
    if (descriptor === "symbols" || descriptor === "additive-symbols") {
      value = value.map((symbol) => `"${symbol}"`).join(" ");
    }
    return `${descriptor}: ${value}`;
  });
  const ruleString = ruleEntries.join("; ");
  const counterRule = `@counter-style ${name} { ${ruleString} }`;
  return counterRule;
};
var counterstyle_default = defineCounterStyle;

// src/WTFCss/src/helpers/@fontface.js
var defineFontFace = (fontFace) => {
  const fontFaceRule = `@font-face {
    font-family: "${fontFace.family}";
    src: ${fontFace.sources.map((source) => {
    if (source.url) {
      return `url("${source.url}") format("${source.format}")`;
    } else if (source.local) {
      return `local("${source.local}")`;
    }
    return "";
  }).join(",\n    ")};
    ${fontFace.descriptors ? Object.entries(fontFace.descriptors).map(([key, value]) => `${key}: ${value}`).join(";\n    ") : ""}
  }`;
  return fontFaceRule;
};
var fontface_default = defineFontFace;

// src/WTFCss/src/helpers/@fontfeaturevalues.js
var defineFontFeatureValues = (familyName, featureValues) => {
  const featureBlocks = Object.entries(featureValues).map(([feature, values]) => {
    const valueString = Array.isArray(values) ? values.join(" ") : values;
    return `@${feature} { ${familyName}: ${valueString}; }`;
  }).join("\n");
  return `@font-feature-values ${familyName} {
${featureBlocks}
}`;
};
var fontfeaturevalues_default = defineFontFeatureValues;

// src/WTFCss/src/helpers/@fontpalletevalues.js
var defineFontPaletteValues = (identifier, familyName, basePalette, overrideColors) => {
  const declarations = [];
  if (familyName)
    declarations.push(`font-family: ${familyName};`);
  if (basePalette)
    declarations.push(`base-palette: ${basePalette};`);
  if (overrideColors) {
    const colorOverrides = overrideColors.map((color) => color.join(" ")).join(",\n    ");
    declarations.push(`override-colors:
    ${colorOverrides};`);
  }
  return `@font-palette-values ${identifier} {
  ${declarations.join("\n  ")}
}`;
};
var fontpalletevalues_default = defineFontPaletteValues;

// src/WTFCss/src/helpers/@import.js
var defineImport = (importPath, mediaQueries = "", supportsCondition = "", layerName = "") => {
  let importRule = `@import url(${importPath})`;
  if (layerName) {
    importRule += ` layer(${layerName})`;
  }
  if (supportsCondition) {
    importRule += ` supports(${supportsCondition})`;
  }
  if (mediaQueries) {
    importRule += ` ${mediaQueries}`;
  }
  importRule += ";";
  return importRule;
};
var import_default = defineImport;

// src/WTFCss/src/helpers/@keyframes.js
var defineKeyframes = (name, frames) => {
  if (typeof name !== "string" || !Array.isArray(frames)) {
    throw new TypeError("Invalid arguments for defineKeyframes.");
  }
  const keyframeRules = frames.map((frame) => {
    const offset = Object.keys(frame)[0];
    const properties = Object.entries(frame[offset]).map(([prop, value]) => {
      return `${prop}: ${value}`;
    }).join("; ");
    return `${offset} { ${properties} }`;
  }).join(" ");
  return `@keyframes ${name} { ${keyframeRules} }`;
};
var keyframes_default = defineKeyframes;

// src/WTFCss/src/helpers/@layer.js
var defineLayer = (name, rules) => {
  if (!name || typeof rules !== "object") {
    throw new TypeError("Invalid arguments for defineLayer.");
  }
  const layerRules = Object.entries(rules).map(([selector, styleRules]) => {
    const styleString = Object.entries(styleRules).map(([property, value]) => `${property}: ${value};`).join(" ");
    return `${selector} { ${styleString} }`;
  }).join(" ");
  return `@layer ${name} { ${layerRules} }`;
};
var defineLayerOrder = (...names) => `@layer ` + names.join(" ");
var layer_default = {
  defineLayer,
  defineLayerOrder
};

// src/WTFCss/src/helpers/@media.js
var defineMedia = (mediaQuery, styles) => {
  if (typeof mediaQuery !== "string" || typeof styles !== "object") {
    throw new TypeError("Invalid arguments for defineMedia.");
  }
  const styleEntries = Object.entries(styles).map(([selector, styleRules]) => {
    const styleString = Object.entries(styleRules).map(([property, value]) => `${property}: ${value};`).join(" ");
    return `${selector} { ${styleString} }`;
  }).join(" ");
  return `@media ${mediaQuery} { ${styleEntries} }`;
};
var media_default = defineMedia;

// src/WTFCss/src/helpers/@namespace.js
var defineNamespace = (prefix, uri) => {
  if (!uri) {
    throw new Error("URI for namespace is required.");
  }
  const namespacePrefix = prefix ? `${prefix} ` : "";
  return `@namespace ${namespacePrefix}url(${uri});`;
};
var namespace_default = defineNamespace;

// src/WTFCss/src/helpers/@page.js
var definePage = (name, styles) => {
  if (typeof styles !== "object") {
    throw new TypeError("Styles must be an object.");
  }
  const styleEntries = Object.entries(styles).map(([property, value]) => {
    if (!/^margin-|^border-|^padding-|^background-|^font-|^text-|^color$|^outline$|^counter-|^width$|^height$|^line-height$|^quotes$|^visibility$/.test(property)) {
      throw new Error(`Property "${property}" is not allowed within @page rule.`);
    }
    return `${property}: ${value};`;
  }).join(" ");
  const pageRule = `@page ${name} { ${styleEntries} }`;
  return pageRule;
};
var page_default = definePage;

// src/WTFCss/src/helpers/@startingstyle.js
var defineStartingStyle = (selector, properties) => {
  const propertyEntries = Object.entries(properties).map(([property, value]) => {
    return `${property}: ${value};`;
  }).join(" ");
  const startingStyleRule = `@starting-style {
  ${selector} { ${propertyEntries} }
}`;
  return startingStyleRule;
};
var startingstyle_default = defineStartingStyle;

// src/WTFCss/src/helpers/@supports.js
var defineSupports = (supportsCondition, rules) => {
  const conditionString = supportsCondition.map((condition) => `(${condition})`).join(" and ");
  const rulesString = Object.entries(rules).map(([selector, styles]) => {
    const styleString = Object.entries(styles).map(([property, value]) => `${property}: ${value};`).join(" ");
    return `${selector} { ${styleString} }`;
  }).join(" ");
  return `@supports ${conditionString} { ${rulesString} }`;
};
var supports_default = defineSupports;

// src/WTFCss/src/helpers/index.js
var helpers_default = {
  charsets: charset_default,
  colorProfiles: colorprofile_default,
  container: container_default,
  property: property_default,
  counterStyles: counterstyle_default,
  fontFaces: fontface_default,
  fontFeatureValues: fontfeaturevalues_default,
  fontPaletteValues: fontpalletevalues_default,
  importer: import_default,
  keyframes: keyframes_default,
  layer: layer_default,
  media: media_default,
  namespace: namespace_default,
  pages: page_default,
  startingStyles: startingstyle_default,
  supports: supports_default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9pbmRleC5qcyIsICIuLi8uLi8uLi9zcmMvV1RGQ3NzL3NyYy9oZWxwZXJzL0BjaGFyc2V0LmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQGNvbG9ycHJvZmlsZS5qcyIsICIuLi8uLi8uLi9zcmMvV1RGQ3NzL3NyYy9oZWxwZXJzL0Bjb250YWluZXIuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9AcHJvcGVydHkuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9AY291bnRlcnN0eWxlLmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQGZvbnRmYWNlLmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQGZvbnRmZWF0dXJldmFsdWVzLmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQGZvbnRwYWxsZXRldmFsdWVzLmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQGltcG9ydC5qcyIsICIuLi8uLi8uLi9zcmMvV1RGQ3NzL3NyYy9oZWxwZXJzL0BrZXlmcmFtZXMuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9AbGF5ZXIuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9AbWVkaWEuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9AbmFtZXNwYWNlLmpzIiwgIi4uLy4uLy4uL3NyYy9XVEZDc3Mvc3JjL2hlbHBlcnMvQHBhZ2UuanMiLCAiLi4vLi4vLi4vc3JjL1dURkNzcy9zcmMvaGVscGVycy9Ac3RhcnRpbmdzdHlsZS5qcyIsICIuLi8uLi8uLi9zcmMvV1RGQ3NzL3NyYy9oZWxwZXJzL0BzdXBwb3J0cy5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IGNoYXJzZXRzIGZyb20gJy4vQGNoYXJzZXQuanMnO1xuaW1wb3J0IGNvbG9yUHJvZmlsZXMgZnJvbSAnLi9AY29sb3Jwcm9maWxlLmpzJztcbmltcG9ydCBjb250YWluZXIgZnJvbSAnLi9AY29udGFpbmVyLmpzJztcbmltcG9ydCBwcm9wZXJ0eSBmcm9tICcuL0Bwcm9wZXJ0eS5qcyc7XG5pbXBvcnQgY291bnRlclN0eWxlcyBmcm9tICcuL0Bjb3VudGVyc3R5bGUuanMnO1xuaW1wb3J0IGZvbnRGYWNlcyBmcm9tICcuL0Bmb250ZmFjZS5qcyc7XG5pbXBvcnQgZm9udEZlYXR1cmVWYWx1ZXMgZnJvbSAnLi9AZm9udGZlYXR1cmV2YWx1ZXMuanMnO1xuaW1wb3J0IGZvbnRQYWxldHRlVmFsdWVzIGZyb20gJy4vQGZvbnRwYWxsZXRldmFsdWVzLmpzJztcbmltcG9ydCBpbXBvcnRlciBmcm9tICcuL0BpbXBvcnQuanMnO1xuaW1wb3J0IGtleWZyYW1lcyBmcm9tICcuL0BrZXlmcmFtZXMuanMnO1xuaW1wb3J0IGxheWVyIGZyb20gJy4vQGxheWVyLmpzJztcbmltcG9ydCBtZWRpYSBmcm9tICcuL0BtZWRpYS5qcyc7XG5pbXBvcnQgbmFtZXNwYWNlIGZyb20gJy4vQG5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgcGFnZXMgZnJvbSAnLi9AcGFnZS5qcyc7XG5pbXBvcnQgc3RhcnRpbmdTdHlsZXMgZnJvbSAnLi9Ac3RhcnRpbmdzdHlsZS5qcyc7XG5pbXBvcnQgc3VwcG9ydHMgZnJvbSAnLi9Ac3VwcG9ydHMuanMnO1xuXG5leHBvcnQge1xuICBjaGFyc2V0cyxcbiAgY29sb3JQcm9maWxlcyxcbiAgY29udGFpbmVyLFxuICBwcm9wZXJ0eSxcbiAgY291bnRlclN0eWxlcyxcbiAgZm9udEZhY2VzLFxuICBmb250RmVhdHVyZVZhbHVlcyxcbiAgZm9udFBhbGV0dGVWYWx1ZXMsXG4gIGltcG9ydGVyLFxuICBrZXlmcmFtZXMsXG4gIGxheWVyLFxuICBtZWRpYSxcbiAgbmFtZXNwYWNlLFxuICBwYWdlcyxcbiAgc3RhcnRpbmdTdHlsZXMsXG4gIHN1cHBvcnRzLFxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNoYXJzZXRzLFxuICBjb2xvclByb2ZpbGVzLFxuICBjb250YWluZXIsXG4gIHByb3BlcnR5LFxuICBjb3VudGVyU3R5bGVzLFxuICBmb250RmFjZXMsXG4gIGZvbnRGZWF0dXJlVmFsdWVzLFxuICBmb250UGFsZXR0ZVZhbHVlcyxcbiAgaW1wb3J0ZXIsXG4gIGtleWZyYW1lcyxcbiAgbGF5ZXIsXG4gIG1lZGlhLFxuICBuYW1lc3BhY2UsXG4gIHBhZ2VzLFxuICBzdGFydGluZ1N0eWxlcyxcbiAgc3VwcG9ydHMsXG59IiwgIi8qKlxuICogRGVmaW5lcyBhIGNoYXJzZXQgZm9yIGEgQ1NTIGZpbGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNoYXJzZXRWYWx1ZSAtIFRoZSBjaGFyc2V0IHRvIGJlIHNldCBmb3IgdGhlIENTUyBmaWxlLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBAY2hhcnNldCBydWxlLlxuICovXG5leHBvcnQgY29uc3QgY2hhcnNldCA9IGNoYXJzZXRWYWx1ZSA9PiBgQGNoYXJzZXQgXCIke2NoYXJzZXRWYWx1ZX1cIjtgXG5leHBvcnQgZGVmYXVsdCBjaGFyc2V0OyIsICIvKipcbiAqIERlZmluZXMgYSBjb2xvciBwcm9maWxlIGZvciB1c2UgaW4gQ1NTLlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY29sb3IgcHJvZmlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgLSBUaGUgVVJMIG9mIHRoZSBjb2xvciBwcm9maWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IFtyZW5kZXJpbmdJbnRlbnRdIC0gVGhlIHJlbmRlcmluZyBpbnRlbnQgdG8gdXNlLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lQ29sb3JQcm9maWxlID0gKG5hbWUsIHNyYywgcmVuZGVyaW5nSW50ZW50KSA9PiB7XG4gIGxldCBwcm9maWxlUnVsZSA9IGBAY29sb3ItcHJvZmlsZSAke25hbWV9IHtcXG4gIHNyYzogdXJsKFxcXCIke3NyY31cXFwiKWA7XG5cbiAgaWYgKHJlbmRlcmluZ0ludGVudCkge1xuICAgIHByb2ZpbGVSdWxlICs9IGA7XFxuICByZW5kZXJpbmctaW50ZW50OiAke3JlbmRlcmluZ0ludGVudH1gO1xuICB9XG5cbiAgcHJvZmlsZVJ1bGUgKz0gJztcXG59JztcblxuICByZXR1cm4gcHJvZmlsZVJ1bGU7XG59XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb2xvclByb2ZpbGUiLCAiLyoqXG4gKiBBcHBsaWVzIHN0eWxlcyB0byBhIGNvbnRhaW5tZW50IGNvbnRleHQgYmFzZWQgb24gYSBjb25kaXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBvcHRpb25hbCBuYW1lIG9mIHRoZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29uZGl0aW9uIC0gVGhlIGNvbnRhaW5lciBxdWVyeSBjb25kaXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gc3R5bGVzIC0gVGhlIENTUyBzdHlsZXMgdG8gYmUgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQGNvbnRhaW5lciBydWxlLlxuICovXG5leHBvcnQgY29uc3QgYXBwbHlDb250YWluZXJTdHlsZXMgPSAobmFtZSwgY29uZGl0aW9uLCBzdHlsZXMpID0+IHtcbiAgbGV0IGNvbnRhaW5lclJ1bGUgPSBgQGNvbnRhaW5lciAke25hbWUgPyBuYW1lICsgJyAnIDogJyd9KCR7Y29uZGl0aW9ufSkge1xcbiR7c3R5bGVzfVxcbn1gO1xuICByZXR1cm4gY29udGFpbmVyUnVsZTtcbn1cbmV4cG9ydCBkZWZhdWx0IGFwcGx5Q29udGFpbmVyU3R5bGVzIiwgIi8qKlxuICogUmVnaXN0ZXJzIGEgY3VzdG9tIENTUyBwcm9wZXJ0eSB1c2luZyB0aGUgQHByb3BlcnR5IHJ1bGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjdXN0b20gcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3ludGF4IC0gRGVzY3JpYmVzIHRoZSBhbGxvd2FibGUgc3ludGF4IGZvciB0aGUgcHJvcGVydHkuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGluaGVyaXRzIC0gQ29udHJvbHMgd2hldGhlciB0aGUgY3VzdG9tIHByb3BlcnR5IGluaGVyaXRzIGJ5IGRlZmF1bHQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5pdGlhbFZhbHVlIC0gU2V0cyB0aGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5LlxuICogQHJldHVybnMge09iamVjdH0gVGhlIGZvcm1hdHRlZCBAcHJvcGVydHkgcnVsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUHJvcGVydHkgPSAobmFtZSwgc3ludGF4LCBpbmhlcml0cywgaW5pdGlhbFZhbHVlKSA9PiB7XG4gIHJldHVybiB7XG4gICAgW2BAcHJvcGVydHkgJHtuYW1lfWBdOiAoXG4gICAgICBcInsgXCIgK1xuICAgICAgKCFzeW50YXggPz8gYHN5bnRheDogXCIke3N5bnRheH1cIjsgYCkgK1xuICAgICAgKCFpbmhlcml0cyA/PyBgaW5oZXJpdHM6ICR7aW5oZXJpdHN9OyBgKSArXG4gICAgICAoIWluaXRpYWxWYWx1ZSA/PyBgaW5pdGlhbC12YWx1ZTogJHtpbml0aWFsVmFsdWV9O2ApICtcbiAgICAgIFwiIH1cIlxuICAgIClcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgcmVnaXN0ZXJQcm9wZXJ0eSIsICIvKipcbiAqIERlZmluZXMgYSBjdXN0b20gY291bnRlciBzdHlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvdW50ZXIgc3R5bGUuXG4gKiBAcGFyYW0ge29iamVjdH0gcnVsZXMgLSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZGVzY3JpcHRvcnMgYW5kIHZhbHVlcyBmb3IgdGhlIHN0eWxlLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBuYW1lIGlzIG9uZSBvZiB0aGUgcmVzZXJ2ZWQgc3R5bGUgbmFtZXMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIEBjb3VudGVyLXN0eWxlIHJ1bGUuXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZpbmVDb3VudGVyU3R5bGUgPSAobmFtZSwgcnVsZXMpID0+IHtcbiAgaWYgKFsnZGVjaW1hbCcsICdkaXNjJywgJ3NxdWFyZScsICdjaXJjbGUnLCAnZGlzY2xvc3VyZS1vcGVuJywgJ2Rpc2Nsb3N1cmUtY2xvc2VkJ10uaW5jbHVkZXMobmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIG5hbWUgXCIke25hbWV9XCIgaXMgbm90IGFsbG93ZWQgZm9yIGN1c3RvbSBjb3VudGVyIHN0eWxlcy5gKTtcbiAgfVxuXG4gIGNvbnN0IHJ1bGVFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocnVsZXMpLm1hcCgoW2Rlc2NyaXB0b3IsIHZhbHVlXSkgPT4ge1xuICAgIGlmIChkZXNjcmlwdG9yID09PSAnc3ltYm9scycgfHwgZGVzY3JpcHRvciA9PT0gJ2FkZGl0aXZlLXN5bWJvbHMnKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLm1hcChzeW1ib2wgPT4gYFxcXCIke3N5bWJvbH1cXFwiYCkuam9pbignICcpO1xuICAgIH1cbiAgICByZXR1cm4gYCR7ZGVzY3JpcHRvcn06ICR7dmFsdWV9YDtcbiAgfSk7XG4gIGNvbnN0IHJ1bGVTdHJpbmcgPSBydWxlRW50cmllcy5qb2luKCc7ICcpO1xuICBjb25zdCBjb3VudGVyUnVsZSA9IGBAY291bnRlci1zdHlsZSAke25hbWV9IHsgJHtydWxlU3RyaW5nfSB9YDtcblxuICByZXR1cm4gY291bnRlclJ1bGVcbn1cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvdW50ZXJTdHlsZSIsICIvKipcbiAqIENyZWF0ZXMgYSBDU1MgQGZvbnQtZmFjZSBydWxlIHN0cmluZy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBmb250RmFjZSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGZvbnQgZmFjZSBjb25maWd1cmF0aW9uLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBAZm9udC1mYWNlIHJ1bGUuXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZpbmVGb250RmFjZSA9IGZvbnRGYWNlID0+IHtcbiAgY29uc3QgZm9udEZhY2VSdWxlID0gYEBmb250LWZhY2Uge1xuICAgIGZvbnQtZmFtaWx5OiBcIiR7Zm9udEZhY2UuZmFtaWx5fVwiO1xuICAgIHNyYzogJHtmb250RmFjZS5zb3VyY2VzLm1hcChzb3VyY2UgPT4ge1xuICAgICAgaWYgKHNvdXJjZS51cmwpIHtcbiAgICAgICAgcmV0dXJuIGB1cmwoXCIke3NvdXJjZS51cmx9XCIpIGZvcm1hdChcIiR7c291cmNlLmZvcm1hdH1cIilgO1xuICAgICAgfSBlbHNlIGlmIChzb3VyY2UubG9jYWwpIHtcbiAgICAgICAgcmV0dXJuIGBsb2NhbChcIiR7c291cmNlLmxvY2FsfVwiKWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSkuam9pbignLFxcbiAgICAnKX07XG4gICAgJHtmb250RmFjZS5kZXNjcmlwdG9ycyA/IE9iamVjdC5lbnRyaWVzKGZvbnRGYWNlLmRlc2NyaXB0b3JzKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fTogJHt2YWx1ZX1gKS5qb2luKCc7XFxuICAgICcpIDogJyd9XG4gIH1gO1xuXG4gIHJldHVybiBmb250RmFjZVJ1bGVcbn07XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVGb250RmFjZSIsICIvKipcbiAqIERlZmluZXMgZm9udCBmZWF0dXJlIHZhbHVlcyBmb3IgYSBnaXZlbiBmb250IGZhbWlseS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmYW1pbHlOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZvbnQgZmFtaWx5LlxuICogQHBhcmFtIHtvYmplY3R9IGZlYXR1cmVWYWx1ZXMgLSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZmVhdHVyZSB0YWdzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQGZvbnQtZmVhdHVyZS12YWx1ZXMgcnVsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmluZUZvbnRGZWF0dXJlVmFsdWVzID0gKGZhbWlseU5hbWUsIGZlYXR1cmVWYWx1ZXMpID0+IHtcbiAgY29uc3QgZmVhdHVyZUJsb2NrcyA9IE9iamVjdC5lbnRyaWVzKGZlYXR1cmVWYWx1ZXMpLm1hcCgoW2ZlYXR1cmUsIHZhbHVlc10pID0+IHtcbiAgICBjb25zdCB2YWx1ZVN0cmluZyA9IEFycmF5LmlzQXJyYXkodmFsdWVzKSA/IHZhbHVlcy5qb2luKCcgJykgOiB2YWx1ZXM7XG4gICAgcmV0dXJuIGBAJHtmZWF0dXJlfSB7ICR7ZmFtaWx5TmFtZX06ICR7dmFsdWVTdHJpbmd9OyB9YDtcbiAgfSkuam9pbignXFxuJyk7XG4gIHJldHVybiBgQGZvbnQtZmVhdHVyZS12YWx1ZXMgJHtmYW1pbHlOYW1lfSB7XFxuJHtmZWF0dXJlQmxvY2tzfVxcbn1gO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUZvbnRGZWF0dXJlVmFsdWVzIiwgIi8qKlxuICogRGVmaW5lcyBmb250IHBhbGV0dGUgdmFsdWVzIGZvciBhIGdpdmVuIGlkZW50aWZpZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRpZmllciAtIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgZm9udCBwYWxldHRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbZmFtaWx5TmFtZV0gLSBUaGUgbmFtZSBvZiB0aGUgZm9udCBmYW1pbHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VQYWxldHRlXSAtIFRoZSBiYXNlIHBhbGV0dGUgb2YgdGhlIGZvbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PHN0cmluZz4+fSBbb3ZlcnJpZGVDb2xvcnNdIC0gQW4gYXJyYXkgb2YgY29sb3Igb3ZlcnJpZGVzLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBAZm9udC1wYWxldHRlLXZhbHVlcyBydWxlLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lRm9udFBhbGV0dGVWYWx1ZXMgPSAoaWRlbnRpZmllciwgZmFtaWx5TmFtZSwgYmFzZVBhbGV0dGUsIG92ZXJyaWRlQ29sb3JzKSA9PiB7XG4gIGNvbnN0IGRlY2xhcmF0aW9ucyA9IFtdO1xuICBpZiAoZmFtaWx5TmFtZSkgZGVjbGFyYXRpb25zLnB1c2goYGZvbnQtZmFtaWx5OiAke2ZhbWlseU5hbWV9O2ApO1xuICBpZiAoYmFzZVBhbGV0dGUpIGRlY2xhcmF0aW9ucy5wdXNoKGBiYXNlLXBhbGV0dGU6ICR7YmFzZVBhbGV0dGV9O2ApO1xuICBpZiAob3ZlcnJpZGVDb2xvcnMpIHtcbiAgICBjb25zdCBjb2xvck92ZXJyaWRlcyA9IG92ZXJyaWRlQ29sb3JzLm1hcChjb2xvciA9PiBjb2xvci5qb2luKCcgJykpLmpvaW4oJyxcXG4gICAgJyk7XG4gICAgZGVjbGFyYXRpb25zLnB1c2goYG92ZXJyaWRlLWNvbG9yczpcXG4gICAgJHtjb2xvck92ZXJyaWRlc307YCk7XG4gIH1cblxuICByZXR1cm4gYEBmb250LXBhbGV0dGUtdmFsdWVzICR7aWRlbnRpZmllcn0ge1xcbiAgJHtkZWNsYXJhdGlvbnMuam9pbignXFxuICAnKX1cXG59YDtcbn1cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUZvbnRQYWxldHRlVmFsdWVzIiwgIi8qKlxuICogQ3JlYXRlcyBhbiBAaW1wb3J0IHJ1bGUgd2l0aCBvcHRpb25hbCBjb25kaXRpb25zIGFuZCBsYXllci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbXBvcnRQYXRoIC0gVGhlIFVSTCBvZiB0aGUgZmlsZSB0byBiZSBpbXBvcnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVkaWFRdWVyaWVzXSAtIFRoZSBtZWRpYSBxdWVyeSBjb25kaXRpb25zLlxuICogQHBhcmFtIHtzdHJpbmd9IFtzdXBwb3J0c0NvbmRpdGlvbl0gLSBUaGUgc3VwcG9ydHMgY29uZGl0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IFtsYXllck5hbWVdIC0gVGhlIG5hbWUgb2YgdGhlIGxheWVyLlxuICogQHJldHVybnMge3N0cmluZ30gLSBUaGUgY29tcGxldGUgQGltcG9ydCBydWxlIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lSW1wb3J0ID0gKGltcG9ydFBhdGgsIG1lZGlhUXVlcmllcyA9ICcnLCBzdXBwb3J0c0NvbmRpdGlvbiA9ICcnLCBsYXllck5hbWUgPSAnJykgPT4ge1xuICBsZXQgaW1wb3J0UnVsZSA9IGBAaW1wb3J0IHVybCgke2ltcG9ydFBhdGh9KWA7XG5cbiAgaWYgKGxheWVyTmFtZSkge1xuICAgIGltcG9ydFJ1bGUgKz0gYCBsYXllcigke2xheWVyTmFtZX0pYDtcbiAgfVxuXG4gIGlmIChzdXBwb3J0c0NvbmRpdGlvbikge1xuICAgIGltcG9ydFJ1bGUgKz0gYCBzdXBwb3J0cygke3N1cHBvcnRzQ29uZGl0aW9ufSlgO1xuICB9XG5cbiAgaWYgKG1lZGlhUXVlcmllcykge1xuICAgIGltcG9ydFJ1bGUgKz0gYCAke21lZGlhUXVlcmllc31gO1xuICB9XG5cbiAgaW1wb3J0UnVsZSArPSAnOyc7XG5cbiAgcmV0dXJuIGltcG9ydFJ1bGU7XG59XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVJbXBvcnQiLCAiLyoqXG4gKiBEZWZpbmVzIGtleWZyYW1lIGFuaW1hdGlvbnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBhbmltYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGZyYW1lcyAtIEFuIGFycmF5IG9mIG9iamVjdHMgcmVwcmVzZW50aW5nIHRoZSBrZXlmcmFtZXMuXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSBhcmd1bWVudHMgYXJlIG5vdCBhIHN0cmluZyBhbmQgYW4gYXJyYXkgb2Ygb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQGtleWZyYW1lcyBydWxlLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lS2V5ZnJhbWVzID0gKG5hbWUsIGZyYW1lcykgPT4ge1xuICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFBcnJheS5pc0FycmF5KGZyYW1lcykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cyBmb3IgZGVmaW5lS2V5ZnJhbWVzLicpO1xuICB9XG5cbiAgY29uc3Qga2V5ZnJhbWVSdWxlcyA9IGZyYW1lcy5tYXAoZnJhbWUgPT4ge1xuICAgIGNvbnN0IG9mZnNldCA9IE9iamVjdC5rZXlzKGZyYW1lKVswXTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmVudHJpZXMoZnJhbWVbb2Zmc2V0XSkubWFwKChbcHJvcCwgdmFsdWVdKSA9PiB7XG4gICAgICByZXR1cm4gYCR7cHJvcH06ICR7dmFsdWV9YDtcbiAgICB9KS5qb2luKCc7ICcpO1xuXG4gICAgcmV0dXJuIGAke29mZnNldH0geyAke3Byb3BlcnRpZXN9IH1gO1xuICB9KS5qb2luKCcgJyk7XG5cbiAgcmV0dXJuIGBAa2V5ZnJhbWVzICR7bmFtZX0geyAke2tleWZyYW1lUnVsZXN9IH1gO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRlZmluZUtleWZyYW1lcyIsICIvKipcbiAqIERlZmluZXMgYSBDU1MgbGF5ZXIgYW5kIGl0cyBhc3NvY2lhdGVkIHN0eWxlIHJ1bGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgbGF5ZXIuXG4gKiBAcGFyYW0ge29iamVjdH0gcnVsZXMgLSBBbiBvYmplY3QgbWFwcGluZyBzZWxlY3RvcnMgdG8gdGhlaXIgcmVzcGVjdGl2ZSBzdHlsZSBydWxlcy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgdGhlIGFyZ3VtZW50cyBhcmUgbm90IGEgc3RyaW5nIGFuZCBhbiBvYmplY3Qgb2Ygc3R5bGUgcnVsZXMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIEBsYXllciBydWxlIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lTGF5ZXIgPSAobmFtZSwgcnVsZXMpID0+IHtcbiAgaWYgKCFuYW1lIHx8IHR5cGVvZiBydWxlcyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cyBmb3IgZGVmaW5lTGF5ZXIuJyk7XG4gIH1cblxuICBjb25zdCBsYXllclJ1bGVzID0gT2JqZWN0LmVudHJpZXMocnVsZXMpLm1hcCgoW3NlbGVjdG9yLCBzdHlsZVJ1bGVzXSkgPT4ge1xuICAgIGNvbnN0IHN0eWxlU3RyaW5nID0gT2JqZWN0LmVudHJpZXMoc3R5bGVSdWxlcykubWFwKChbcHJvcGVydHksIHZhbHVlXSkgPT4gYCR7cHJvcGVydHl9OiAke3ZhbHVlfTtgKS5qb2luKCcgJyk7XG4gICAgcmV0dXJuIGAke3NlbGVjdG9yfSB7ICR7c3R5bGVTdHJpbmd9IH1gO1xuICB9KS5qb2luKCcgJyk7XG5cbiAgcmV0dXJuIGBAbGF5ZXIgJHtuYW1lfSB7ICR7bGF5ZXJSdWxlc30gfWA7XG59O1xuXG5leHBvcnQgY29uc3QgZGVmaW5lTGF5ZXJPcmRlciA9ICguLi5uYW1lcykgPT4gKGBAbGF5ZXIgYCArIG5hbWVzLmpvaW4oJyAnKSlcblxuZXhwb3J0IGRlZmF1bHQge1xuICBkZWZpbmVMYXllcixcbiAgZGVmaW5lTGF5ZXJPcmRlclxufSIsICIvKipcbiAqIERlZmluZXMgYSBDU1MgbWVkaWEgcXVlcnkgYW5kIGl0cyBhc3NvY2lhdGVkIHN0eWxlIHJ1bGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IG1lZGlhUXVlcnkgLSBUaGUgbWVkaWEgcXVlcnkgc3RyaW5nLlxuICogQHBhcmFtIHtvYmplY3R9IHN0eWxlcyAtIEFuIG9iamVjdCBtYXBwaW5nIHNlbGVjdG9ycyB0byB0aGVpciByZXNwZWN0aXZlIHN0eWxlIHJ1bGVzLlxuICogQHRocm93cyB7VHlwZUVycm9yfSBJZiB0aGUgYXJndW1lbnRzIGFyZSBub3QgYSBzdHJpbmcgYW5kIGFuIG9iamVjdCBvZiBzdHlsZSBydWxlcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQG1lZGlhIHJ1bGUgYXMgYSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZpbmVNZWRpYSA9IChtZWRpYVF1ZXJ5LCBzdHlsZXMpID0+IHtcbiAgaWYgKHR5cGVvZiBtZWRpYVF1ZXJ5ICE9PSAnc3RyaW5nJyB8fCB0eXBlb2Ygc3R5bGVzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIGZvciBkZWZpbmVNZWRpYS4nKTtcbiAgfVxuXG4gIGNvbnN0IHN0eWxlRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHN0eWxlcykubWFwKChbc2VsZWN0b3IsIHN0eWxlUnVsZXNdKSA9PiB7XG4gICAgY29uc3Qgc3R5bGVTdHJpbmcgPSBPYmplY3QuZW50cmllcyhzdHlsZVJ1bGVzKS5tYXAoKFtwcm9wZXJ0eSwgdmFsdWVdKSA9PiBgJHtwcm9wZXJ0eX06ICR7dmFsdWV9O2ApLmpvaW4oJyAnKTtcbiAgICByZXR1cm4gYCR7c2VsZWN0b3J9IHsgJHtzdHlsZVN0cmluZ30gfWA7XG4gIH0pLmpvaW4oJyAnKTtcblxuICByZXR1cm4gYEBtZWRpYSAke21lZGlhUXVlcnl9IHsgJHtzdHlsZUVudHJpZXN9IH1gO1xufTtcbmV4cG9ydCBkZWZhdWx0IGRlZmluZU1lZGlhIiwgIi8qKlxuICogRGVmaW5lcyBhIENTUyBuYW1lc3BhY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gW3ByZWZpeF0gLSBUaGUgb3B0aW9uYWwgcHJlZml4IGZvciB0aGUgbmFtZXNwYWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHVyaSAtIFRoZSBVUkkgb2YgdGhlIG5hbWVzcGFjZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgVVJJIGlzIG5vdCBwcm92aWRlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQG5hbWVzcGFjZSBydWxlIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lTmFtZXNwYWNlID0gKHByZWZpeCwgdXJpKSA9PiB7XG4gIGlmICghdXJpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVUkkgZm9yIG5hbWVzcGFjZSBpcyByZXF1aXJlZC4nKTtcbiAgfVxuXG4gIGNvbnN0IG5hbWVzcGFjZVByZWZpeCA9IHByZWZpeCA/IGAke3ByZWZpeH0gYCA6ICcnO1xuICByZXR1cm4gYEBuYW1lc3BhY2UgJHtuYW1lc3BhY2VQcmVmaXh9dXJsKCR7dXJpfSk7YDtcbn07XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVOYW1lc3BhY2UiLCAiLyoqXG4gKiBEZWZpbmVzIGEgQ1NTIEBwYWdlIHJ1bGUgd2l0aCB0aGUgZ2l2ZW4gbmFtZSBhbmQgc3R5bGVzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHBhZ2UgcnVsZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBzdHlsZXMgLSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgQ1NTIHByb3BlcnRpZXMgYW5kIHZhbHVlcy5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgc3R5bGVzIGlzIG5vdCBhbiBvYmplY3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgYSBwcm9wZXJ0eSBpcyBub3QgYWxsb3dlZCB3aXRoaW4gQHBhZ2UgcnVsZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgQHBhZ2UgcnVsZSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmluZVBhZ2UgPSAobmFtZSwgc3R5bGVzKSA9PiB7XG4gIGlmICh0eXBlb2Ygc3R5bGVzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N0eWxlcyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgfVxuXG4gIGNvbnN0IHN0eWxlRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHN0eWxlcykubWFwKChbcHJvcGVydHksIHZhbHVlXSkgPT4ge1xuICAgIGlmICghL15tYXJnaW4tfF5ib3JkZXItfF5wYWRkaW5nLXxeYmFja2dyb3VuZC18XmZvbnQtfF50ZXh0LXxeY29sb3IkfF5vdXRsaW5lJHxeY291bnRlci18XndpZHRoJHxeaGVpZ2h0JHxebGluZS1oZWlnaHQkfF5xdW90ZXMkfF52aXNpYmlsaXR5JC8udGVzdChwcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvcGVydHkgXCIke3Byb3BlcnR5fVwiIGlzIG5vdCBhbGxvd2VkIHdpdGhpbiBAcGFnZSBydWxlLmApO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cHJvcGVydHl9OiAke3ZhbHVlfTtgO1xuICB9KS5qb2luKCcgJyk7XG5cbiAgY29uc3QgcGFnZVJ1bGUgPSBgQHBhZ2UgJHtuYW1lfSB7ICR7c3R5bGVFbnRyaWVzfSB9YDtcblxuICByZXR1cm4gcGFnZVJ1bGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lUGFnZTsiLCAiLyoqXG4gKiBEZWZpbmVzIGEgc3RhcnRpbmcgc3R5bGUgZm9yIGEgc2VsZWN0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgLSBUaGUgQ1NTIHNlbGVjdG9yIHRvIHdoaWNoIHRoZSBzdGFydGluZyBzdHlsZSB3aWxsIGJlIGFwcGxpZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcGVydGllcyAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBDU1MgcHJvcGVydGllcyBhbmQgdmFsdWVzLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCBAc3RhcnRpbmctc3R5bGUgcnVsZSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmluZVN0YXJ0aW5nU3R5bGUgPSAoc2VsZWN0b3IsIHByb3BlcnRpZXMpID0+IHtcbiAgY29uc3QgcHJvcGVydHlFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykubWFwKChbcHJvcGVydHksIHZhbHVlXSkgPT4ge1xuICAgIHJldHVybiBgJHtwcm9wZXJ0eX06ICR7dmFsdWV9O2A7XG4gIH0pLmpvaW4oJyAnKTtcblxuICBjb25zdCBzdGFydGluZ1N0eWxlUnVsZSA9IGBAc3RhcnRpbmctc3R5bGUge1xcbiAgJHtzZWxlY3Rvcn0geyAke3Byb3BlcnR5RW50cmllc30gfVxcbn1gO1xuXG4gIHJldHVybiBzdGFydGluZ1N0eWxlUnVsZTtcbn07XG5leHBvcnQgZGVmYXVsdCBkZWZpbmVTdGFydGluZ1N0eWxlOyIsICIvKipcbiAqIERlZmluZXMgYSBDU1MgQHN1cHBvcnRzIHJ1bGUuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHN1cHBvcnRzQ29uZGl0aW9uIC0gQW4gYXJyYXkgb2YgY29uZGl0aW9ucyB0aGF0IHRoZSBicm93c2VyIG11c3Qgc3VwcG9ydC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBydWxlcyAtIEFuIG9iamVjdCBtYXBwaW5nIHNlbGVjdG9ycyB0byB0aGVpciByZXNwZWN0aXZlIHN0eWxlIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIEBzdXBwb3J0cyBydWxlIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgY29uc3QgZGVmaW5lU3VwcG9ydHMgPSAoc3VwcG9ydHNDb25kaXRpb24sIHJ1bGVzKSA9PiB7XG4gIGNvbnN0IGNvbmRpdGlvblN0cmluZyA9IHN1cHBvcnRzQ29uZGl0aW9uLm1hcChjb25kaXRpb24gPT4gYCgke2NvbmRpdGlvbn0pYCkuam9pbignIGFuZCAnKTtcbiAgY29uc3QgcnVsZXNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhydWxlcykubWFwKChbc2VsZWN0b3IsIHN0eWxlc10pID0+IHtcbiAgICBjb25zdCBzdHlsZVN0cmluZyA9IE9iamVjdC5lbnRyaWVzKHN0eWxlcykubWFwKChbcHJvcGVydHksIHZhbHVlXSkgPT4gYCR7cHJvcGVydHl9OiAke3ZhbHVlfTtgKS5qb2luKCcgJyk7XG4gICAgcmV0dXJuIGAke3NlbGVjdG9yfSB7ICR7c3R5bGVTdHJpbmd9IH1gO1xuICB9KS5qb2luKCcgJyk7XG5cbiAgcmV0dXJuIGBAc3VwcG9ydHMgJHtjb25kaXRpb25TdHJpbmd9IHsgJHtydWxlc1N0cmluZ30gfWA7XG59O1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lU3VwcG9ydHM7Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7OztBQ01PLElBQU0sVUFBVSxrQkFBZ0IsYUFBYSxZQUFZO0FBQ2hFLElBQU8sa0JBQVE7OztBQ0RSLElBQU0scUJBQXFCLENBQUMsTUFBTSxLQUFLLG9CQUFvQjtBQUNoRSxNQUFJLGNBQWMsa0JBQWtCLElBQUk7QUFBQSxjQUFvQixHQUFHO0FBRS9ELE1BQUksaUJBQWlCO0FBQ25CLG1CQUFlO0FBQUEsc0JBQTBCLGVBQWU7QUFBQSxFQUMxRDtBQUVBLGlCQUFlO0FBRWYsU0FBTztBQUNUO0FBQ0EsSUFBTyx1QkFBUTs7O0FDVlIsSUFBTSx1QkFBdUIsQ0FBQyxNQUFNLFdBQVcsV0FBVztBQUMvRCxNQUFJLGdCQUFnQixjQUFjLE9BQU8sT0FBTyxNQUFNLEVBQUUsSUFBSSxTQUFTO0FBQUEsRUFBUSxNQUFNO0FBQUE7QUFDbkYsU0FBTztBQUNUO0FBQ0EsSUFBTyxvQkFBUTs7O0FDSFIsSUFBTSxtQkFBbUIsQ0FBQyxNQUFNLFFBQVEsVUFBVSxpQkFBaUI7QUFDeEUsU0FBTztBQUFBLElBQ0wsQ0FBQyxhQUFhLElBQUksRUFBRSxHQUNsQixPQUNDLENBQUMsU0FDRCxDQUFDLFdBQ0QsQ0FBQyxlQUNGO0FBQUEsRUFFSjtBQUNGO0FBQ0EsSUFBTyxtQkFBUTs7O0FDWlIsSUFBTSxxQkFBcUIsQ0FBQyxNQUFNLFVBQVU7QUFDakQsTUFBSSxDQUFDLFdBQVcsUUFBUSxVQUFVLFVBQVUsbUJBQW1CLG1C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